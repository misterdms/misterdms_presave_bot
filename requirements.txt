# ============================================
# Do Presave Reminder Bot v25+ - PRODUCTION READY
# Исправленные версии для совместимости с Python 3.11+ и Render.com
# ============================================

# ============================================
# COMPATIBILITY FIXES для Python 3.11+ и Render.com
# ============================================

# Стабильные версии для production
wheel==0.45.1
packaging==24.2
six==1.16.0
urllib3==2.2.3
certifi==2024.8.30

# Избегаем конфликтов
setuptools-scm==8.1.0
importlib-metadata==8.5.0
setuptools>=75.0.0,<80.0.0
pip>=24.0.0,<25.0.0

# ============================================
# ПЛАН 1 - БАЗОВЫЙ ФУНКЦИОНАЛ (ОБЯЗАТЕЛЬНЫЕ)
# ============================================

# Telegram Bot API
pyTelegramBotAPI==4.22.1

# Environment management
python-dotenv==1.0.0

# HTTP requests
requests==2.32.3

# Async HTTP client - ИСПРАВЛЕННАЯ ВЕРСИЯ
aiohttp==3.10.11

# Web framework
flask==3.0.0

# Date utilities
python-dateutil==2.8.2

# WSGI server
gunicorn==21.2.0

# Encryption - ИСПРАВЛЕННАЯ ВЕРСИЯ  
cryptography==44.0.0

# PostgreSQL adapter - ИСПРАВЛЕННАЯ ВЕРСИЯ
psycopg2-binary==2.9.10

# Database ORM
sqlalchemy==2.0.25

# Database migrations
alembic==1.13.1

# JSON processing
ujson==5.8.0

# Timezone support
pytz==2023.3

# Data validation
pydantic==2.5.0

# Rich console output
rich==13.7.0

# ============================================
# ПЛАН 2 - СИСТЕМА КАРМЫ (ОПЦИОНАЛЬНО)
# ============================================

# OpenAI API client
openai==1.3.0

# Anthropic API client
anthropic==0.7.0

# Regular expressions - ИСПРАВЛЕННАЯ ВЕРСИЯ
regex==2024.11.6

# Language detection
langdetect==1.0.9

# Fuzzy string matching
fuzzywuzzy==0.18.0

# String distance algorithms
python-Levenshtein==0.23.0

# Natural Language Toolkit
nltk==3.8.1

# Token counting - ИСПРАВЛЕННАЯ ВЕРСИЯ
tiktoken==0.8.0

# Async file operations
aiofiles==23.2.1

# Image processing - ИСПРАВЛЕННАЯ ВЕРСИЯ (КРИТИЧНО!)
Pillow==10.4.0

# ============================================
# ПЛАН 3 - ИИ И ИНТЕРАКТИВНЫЕ ФОРМЫ
# ============================================

# Backup scheduling
schedule==1.2.0

# Enhanced backup compression
zipfile-deflate64==0.2.0

# Database backup utilities
pg_dump==1.0.0

# File operations
pathlib2==2.3.7

# ============================================
# ПЛАН 4 - BACKUP СИСТЕМА (КРИТИЧНО!)
# ============================================

# Logging and monitoring
structlog==23.2.0
colorama==0.4.6

# Performance monitoring
psutil==5.9.6

# Configuration validation
cerberus==1.3.5

# Retry mechanisms for API calls
tenacity==8.2.3

# URL parsing and validation
validators==0.22.0

# Memory optimization
pympler==0.9

# ============================================
# DEVELOPMENT & TESTING (ОПЦИОНАЛЬНО)
# ============================================

# Testing framework
pytest==7.4.3
pytest-asyncio==0.21.1
pytest-mock==3.12.0

# Code formatting
black==23.11.0
isort==5.12.0

# Type checking
mypy==1.7.1

# Linting
flake8==6.1.0
pylint==3.0.3

# ============================================
# БЕЗОПАСНОСТЬ И СТАБИЛЬНОСТЬ
# ============================================

# Security scanning
safety==2.3.5

# Environment isolation
virtualenv==20.24.7

# ============================================
# RENDER.COM СПЕЦИФИЧНЫЕ
# ============================================

# WSGI server optimization
gevent==23.9.1

# Process management
supervisor==4.2.5

# ============================================
# NOTES FOR DEVELOPMENT
# ============================================

# ПЛАН 1: Минимальная установка
# pip install -r requirements.txt --only-sections="ПЛАН 1"

# ПЛАН 2: Добавить карму  
# pip install rich pydantic pytz

# ПЛАН 3: Добавить ИИ
# pip install openai anthropic tiktoken nltk langdetect fuzzywuzzy

# ПЛАН 4: Добавить backup (КРИТИЧНО!)
# pip install schedule zipfile-deflate64

# ============================================
# COMPATIBILITY MATRIX
# ============================================

# Python: 3.11+ (Render.com compatibility)
# PostgreSQL: 13+ (Render.com Free tier)
# Telegram Bot API: 6.0+ (latest features)
# OpenAI API: v1+ (for Plan 3)
# Anthropic API: 0.7+ (for Plan 3)

# ============================================
# MEMORY USAGE ESTIMATION
# ============================================

# План 1: ~150MB RAM
# План 2: ~170MB RAM (+karma system)
# План 3: ~250MB RAM (+AI integrations)  
# План 4: ~180MB RAM (+backup system)
# Всего: ~300MB RAM (в пределах Render.com Free tier 512MB)

# ============================================
# DEPLOYMENT VERIFICATION
# ============================================

# Команда для проверки зависимостей:
# pip check
# pip list --outdated
# safety check
